(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{7406:function(jt,ce,s){"use strict";s.r(ce),s.d(ce,{default:function(){return Ht}});var pe=s(58024),V=s(39144),te=s(49111),ie=s(19650),we=s(88983),oe=s(47933),fe=s(86582),k=s(2824),Ee=s(13062),G=s(71230),Ye=s(89032),m=s(15746),Q=s(57663),E=s(71577),P=s(11849),b=s(3182),Y=s(43358),xt=s(34041),yr=s(14965),Ie=s(68588),Zt=s(94043),c=s.n(Zt),Z=s(63804),ae=s(16846),se=s(55251),jr=s(71194),he=s(50146),Rt=s(30381),X=s.n(Rt),L=s(21010),St=s(58971),B=s.n(St);function bt(t){return ge.apply(this,arguments)}function ge(){return ge=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-ratertypes"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),ge.apply(this,arguments)}function Tt(t){return ye.apply(this,arguments)}function ye(){return ye=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/count-reports-by-category"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),ye.apply(this,arguments)}function kt(t){return je.apply(this,arguments)}function je(){return je=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-pending-resolved"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),je.apply(this,arguments)}function Ct(t){return xe.apply(this,arguments)}function xe(){return xe=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-performance"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),xe.apply(this,arguments)}function Ae(t){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-reported-department"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),Ze.apply(this,arguments)}function Pt(t){return Re.apply(this,arguments)}function Re(){return Re=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-respondents"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),Re.apply(this,arguments)}function Ft(t){return Se.apply(this,arguments)}function Se(){return Se=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/reply-report"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},data:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),Se.apply(this,arguments)}function Dt(t){return be.apply(this,arguments)}function be(){return be=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-comments"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),be.apply(this,arguments)}function Mt(t){return Te.apply(this,arguments)}function Te(){return Te=(0,b.Z)(c().mark(function t(l){var u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=B().get("token"),r.abrupt("return",(0,L.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-assignedoffice-comments"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},params:l,skipErrorHandler:!0}));case 2:case"end":return r.stop()}},t)})),Te.apply(this,arguments)}var e=s(85893),Ot=function(t){var l=t.state,u=t.setState,d=t.onSeeRatings,r=t.user;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(he.Z,{title:"Respondents",centered:!0,visible:l,onOk:function(){return u(!1)},onCancel:function(){return u(!1)},width:1e3,children:(0,e.jsx)(se.ZP,{request:function(){var R=(0,b.Z)(c().mark(function v(p,i,g){var o,n;return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Pt((0,P.Z)({raterType:((o=g.raterType)===null||o===void 0?void 0:o[0])||null,establishment:r.mode==="assigned-officer"?r==null?void 0:r.name:void 0},p));case 3:return n=a.sent,a.abrupt("return",{data:n.respondents});case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},v,null,[[0,7]])}));return function(v,p,i){return R.apply(this,arguments)}}(),columns:[{title:"Full Name",width:80,dataIndex:"fullname",search:!1},{title:"User Type",dataIndex:"raterType",filters:!0,filterMultiple:!1,search:!1,valueEnum:{Doctor:{text:"Doctor"},Client:{text:"Client"},"Company Employee":{text:"Company Employee"},Visitor:{text:"Visitor"}}},{title:"Ratings",search:!1,render:function(v,p){if(p!=null&&p.rate)return(0,e.jsx)(E.Z,{onClick:function(){return d(p)},children:"See Ratings"})}},{title:"Issues",search:!1,render:function(v,p){var i;return(0,e.jsx)("strong",{children:p==null||(i=p.reports)===null||i===void 0?void 0:i.join(". ")})}},{title:"Date",dataIndex:"createdAt",valueType:"date",render:function(v,p){return"".concat(X()(p==null?void 0:p.createdAt).format("MMMM DD, YYYY"))}}],rowKey:"key",pagination:{showQuickJumper:!0,pageSize:5},search:{filterType:"light"},dateFormatter:"string",height:400})})})},ke=s(8212),$e=s(7945),xr=s(34792),Ce=s(48086),wt=s(37476),ze=s(5966),Pe=s(90672),Et=s(64317),Yt=function(t){var l,u=t.state,d=t.setState,r=t.actionRef,R=t.selectedReport,v=t.assignedOfficerTableRef,p=t.commentsTableRef,i=B().get("user"),g=R.mode,o=R.data;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(wt.Y,{title:"Reported Department",centered:!0,visible:u,width:400,modalProps:{onCancel:function(){return d(!1)}},onFinish:function(){var n=(0,b.Z)(c().mark(function x(a){var D,S,O,h,y,q;return c().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,Ft((0,P.Z)({_id:o._id},a));case 3:D=z.sent,D.success?(d(!1),Ce.default.success(D.message),r==null||(S=r.current)===null||S===void 0||S.reload(),v==null||(O=v.current)===null||O===void 0||(h=O.reload)===null||h===void 0||h.call(O),p==null||(y=p.current)===null||y===void 0||(q=y.reload)===null||q===void 0||q.call(y)):Ce.default.error(D==null?void 0:D.message),z.next=10;break;case 7:z.prev=7,z.t0=z.catch(0),Ce.default.error("Failed");case 10:case"end":return z.stop()}},x,null,[[0,7]])}));return function(x){return n.apply(this,arguments)}}(),children:[(0,e.jsx)(ze.Z,{name:"establishment",label:"Name of Office",placeholder:"",rules:[{required:!0}],disabled:!0,initialValue:o==null?void 0:o.establishment}),(0,e.jsx)(ze.Z,{name:"name",label:"Name of Visitor",placeholder:"",rules:[{required:!0}],disabled:!0,initialValue:o==null?void 0:o.fullname}),g==="reports"&&(0,e.jsx)(Pe.Z,{name:"reports",label:"Reports",placeholder:"",disabled:!0,initialValue:o==null||(l=o.reports)===null||l===void 0?void 0:l.join(". ")}),g==="comments"&&(0,e.jsx)(Pe.Z,{name:"rateComment",label:"Customer Concern",placeholder:"",disabled:!0,initialValue:o==null?void 0:o.rateComment}),(0,e.jsx)(Pe.Z,{name:"reply",label:"Response",placeholder:"",disabled:(i==null?void 0:i.mode)==="admin",initialValue:o==null?void 0:o.reply}),i.mode==="admin"&&(0,e.jsx)(Et.Z,{request:(0,b.Z)(c().mark(function n(){return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",[{label:"Done",value:!0},{label:"Pending",value:!1}]);case 1:case"end":return a.stop()}},n)})),initialValue:o==null?void 0:o.remarks,name:"remarks",label:"Remarks"})]})})},It=s(952),J=s(82361),At=function(t){var l=t.state,u=t.setState,d=t.comment;return console.log(d.rate_one),(0,e.jsx)(he.Z,{title:(0,e.jsxs)(e.Fragment,{children:[d.establishment," | ",(0,e.jsx)("strong",{children:d.fullname})]}),centered:!0,visible:l,onCancel:function(){return u(!1)},footer:!1,width:1e3,children:(0,e.jsx)(It.ZP,{submitter:{render:function(R,v){return(0,e.jsx)(e.Fragment,{})}},initialValues:{star1:d.rate_one||0,star2:d.rate_two||0,star3:d.rate_three||0,star4:d.rate_four||0,star5:d.rate_five||0,star6:d.rate_six||0,star7:d.rate_seven||0,star8:d.rate_eight||0,star9:d.rate_nine||0,star10:d.rate_ten||0},children:(0,e.jsxs)(G.Z,{gutter:24,children:[(0,e.jsxs)(m.Z,{span:5,children:[(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star1",label:"Courtesy"}),(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star2",label:"Accuracy",disabled:!0})]}),(0,e.jsxs)(m.Z,{span:5,children:[(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star3",label:"Professionalism",disabled:!0}),(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star4",label:"Cleanliness",disabled:!0})]}),(0,e.jsxs)(m.Z,{span:5,children:[(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star5",label:"Health Protocol",disabled:!0}),(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star6",label:"Timeliness",disabled:!0})]}),(0,e.jsxs)(m.Z,{span:5,children:[(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star7",label:"Service Efficiency",disabled:!0}),(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star8",label:"Fairness",disabled:!0})]}),(0,e.jsxs)(m.Z,{span:4,children:[(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star9",label:"Overall Services",disabled:!0}),(0,e.jsx)(J.Z,{rules:[{required:!0}],name:"star10",label:"Responsiveness",disabled:!0})]})]})})})},$t=function(t){var l=t.state,u=t.setState,d=t.offices;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(he.Z,{title:"Issues",centered:!0,visible:l,onOk:function(){return u(!1)},onCancel:function(){return u(!1)},width:1500,children:(0,e.jsx)(se.ZP,{request:function(){var r=(0,b.Z)(c().mark(function R(v,p,i){var g,o,n;return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ae((0,P.Z)({remarks:i!=null&&i.remarks?(i==null||(g=i.remarks)===null||g===void 0?void 0:g[0])==="1":l==="resolved"?!0:null,establishment:((o=i.establishment)===null||o===void 0?void 0:o[0])||null},v));case 3:return n=a.sent,a.abrupt("return",{data:n.reports,total:n.total});case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},R,null,[[0,7]])}));return function(R,v,p){return r.apply(this,arguments)}}(),scroll:{x:1e3},columns:[{title:"Name",width:90,dataIndex:"establishment",filters:!0,filterMultiple:!1,valueEnum:d,search:!1},{title:"Issues",render:function(R,v){var p;return(0,e.jsx)("strong",{children:v==null||(p=v.reports)===null||p===void 0?void 0:p.join(". ")})},search:!1},{title:"Remarks",width:90,dataIndex:"remarks",render:function(R,v){return"".concat(v.remarks?"Done":"Pending")},filters:!0,filterMultiple:!1,defaultFilteredValue:l==="resolved"?"1":"0",valueEnum:{1:{text:"Done"},0:{text:"Pending"}},search:!1},{title:"Date",width:90,dataIndex:"createdAt",valueType:"date",render:function(R,v){return"".concat(X()(v==null?void 0:v.createdAt).format("MMMM DD, YYYY"))}}],rowKey:"key",pagination:{pageSize:5},search:{filterType:"light"},dateFormatter:"string",headerTitle:"Overall Reported Offices"})})})},Be=s(67265),zt=s(30020),Zr=s(402),Bt=s(97272),Ut=Bt.Z.Title,_=function(){return(0,e.jsxs)("div",{style:{alignSelf:"center",marginTop:20,marginBottom:20},children:[(0,e.jsx)("img",{src:"../assets/images/no_data.svg",style:{height:50}}),(0,e.jsx)(Ut,{level:5,style:{opacity:.5,marginTop:10},children:"No Data"})]})},Wt=s(73727),Nt=Ie.Z.RangePicker,Rr=xt.Z.Option,Ue=function(l){var u=l.offices,d=l.overallFilter,r=l.reportsTableRef,R=l.commentsTableRef,v=l.setUpdateReport,p=l.setSelectedReport,i=l.forPrint;return(0,e.jsxs)(G.Z,{gutter:10,children:[(0,e.jsxs)(m.Z,{xs:24,sm:24,md:24,lg:12,xl:12,children:[(0,e.jsx)(se.ZP,{actionRef:r,request:function(){var g=(0,b.Z)(c().mark(function o(n,x,a){var D,S,O;return c().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log("Called"),y.prev=1,y.next=4,Ae((0,P.Z)({overallFilter:d?JSON.stringify(d):null,remarks:a!=null&&a.remarks?(a==null||(D=a.remarks)===null||D===void 0?void 0:D[0])==="1":null,establishment:((S=a.establishment)===null||S===void 0?void 0:S[0])||null},n));case 4:return O=y.sent,y.abrupt("return",{data:O.reports,total:O.total});case 8:y.prev=8,y.t0=y.catch(1),console.log(y.t0);case 11:case"end":return y.stop()}},o,null,[[1,8]])}));return function(o,n,x){return g.apply(this,arguments)}}(),scroll:{x:1e3},columns:[{title:"Name",width:90,dataIndex:"establishment",filters:!0,filterMultiple:!1,valueEnum:u,search:!1},{title:"Issues",render:function(o,n){var x;return(0,e.jsx)("strong",{children:n==null||(x=n.reports)===null||x===void 0?void 0:x.join(". ")})},search:!1},{title:"Remarks",width:90,dataIndex:"remarks",render:function(o,n){return"".concat(n.remarks?"Done":"Pending")},filters:!0,filterMultiple:!1,valueEnum:{1:{text:"Done"},0:{text:"Pending"}},search:!1},{title:"Date",width:90,dataIndex:"createdAt",valueType:"date",render:function(o,n){return"".concat(X()(n==null?void 0:n.createdAt).format("MMMM DD, YYYY"))}},{title:"Actions",search:!1,fixed:"right",width:120,hideInTable:i,render:function(o,n){return(0,e.jsx)(E.Z,{icon:(0,e.jsx)(ke.Z,{}),type:"primary",onClick:function(){p({mode:"reports",data:n}),v(!0)},children:"Update"},"button")}}],rowKey:"key",pagination:{pageSize:5},search:{filterType:"light"},dateFormatter:"string",headerTitle:"Overall Reported Offices"}),(0,e.jsx)("div",{style:{height:10}})]}),(0,e.jsxs)(m.Z,{xs:24,sm:24,md:24,lg:12,xl:12,children:[(0,e.jsx)(se.ZP,{actionRef:R,request:function(){var g=(0,b.Z)(c().mark(function o(n,x,a){var D,S;return c().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,Dt((0,P.Z)({overallFilter:d?JSON.stringify(d):null,remarks:a!=null&&a.remarks?(a==null||(D=a.remarks)===null||D===void 0?void 0:D[0])==="1":null},n));case 3:return S=h.sent,h.abrupt("return",{data:S.comments,total:S==null?void 0:S.total});case 7:h.prev=7,h.t0=h.catch(0),console.log(h.t0);case 10:case"end":return h.stop()}},o,null,[[0,7]])}));return function(o,n,x){return g.apply(this,arguments)}}(),scroll:{x:1e3},columns:[{title:"Comments and Suggestions",width:100,dataIndex:"rateComment",search:!1},{title:"Remarks",width:90,dataIndex:"remarks",render:function(o,n){return n!=null&&n.remarks?"Done":"Pending"},filters:!0,filterMultiple:!1,valueEnum:{1:{text:"Done"},0:{text:"Pending"}},search:!1},{title:"Date",width:90,dataIndex:"createdAt",render:function(o,n){return"".concat(X()(n==null?void 0:n.createdAt).format("MMMM DD, YYYY"))},valueType:"date"},{title:"Actions",fixed:"right",search:!1,hideInTable:i,width:40,render:function(o,n){return(0,e.jsx)(E.Z,{icon:(0,e.jsx)(ke.Z,{}),type:"primary",onClick:function(){p({mode:"comments",data:n}),v(!0)},children:"Update"},"button")}}],rowKey:"key",pagination:{pageSize:5},search:{filterType:"light"},dateFormatter:"string",headerTitle:"Overall Comments and Suggestions"})," "]})]})},We=function(l){var u=l.overallFilter,d=l.reportsCountTableRef,r=l.forPrint,R=l.establishment,v=(0,Z.useState)(0),p=(0,k.Z)(v,2),i=p[0],g=p[1];return(0,e.jsx)(G.Z,{gutter:10,children:(0,e.jsxs)(m.Z,{xs:24,sm:24,md:24,lg:24,xl:24,children:[(0,e.jsx)(se.ZP,{actionRef:d,request:function(){var o=(0,b.Z)(c().mark(function n(x,a,D){var S,O;return c().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,Tt((0,P.Z)({overallFilter:u?JSON.stringify(u):null,establishment:R||null},x));case 3:return S=y.sent,O=S.countPerCategory.reduce(function(q,U){return console.log(q,U),q+U.count},0),g(O),y.abrupt("return",{data:S.countPerCategory});case 9:y.prev=9,y.t0=y.catch(0),console.log(y.t0);case 12:case"end":return y.stop()}},n,null,[[0,9]])}));return function(n,x,a){return o.apply(this,arguments)}}(),scroll:{x:1e3},columns:[{title:"Report",dataIndex:"label",search:!1},{title:"Count",dataIndex:"count",search:!1}],rowKey:"key",pagination:{pageSize:20},search:{filterType:"light"},dateFormatter:"string",headerTitle:"Report Count (".concat(i,")")}),(0,e.jsx)("div",{style:{height:10}})]})})},Ne=function(l){var u=l.assignedOfficerTableRef,d=l.setUpdateReport,r=l.setSelectedReport,R=l.overallFilter,v=l.user,p=l.setSeeRatings,i=l.forPrint;return(0,e.jsx)(se.ZP,{actionRef:u,request:function(){var g=(0,b.Z)(c().mark(function o(n,x,a){var D,S;return c().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,Mt((0,P.Z)({overallFilter:R?JSON.stringify(R):null,officeName:v.name,remarks:a!=null&&a.remarks?(a==null||(D=a.remarks)===null||D===void 0?void 0:D[0])==="1":null},n));case 3:return S=h.sent,h.abrupt("return",{data:S.comments,total:S==null?void 0:S.total});case 7:h.prev=7,h.t0=h.catch(0),console.log(h.t0);case 10:case"end":return h.stop()}},o,null,[[0,7]])}));return function(o,n,x){return g.apply(this,arguments)}}(),columns:[{title:"Name",dataIndex:"fullname",search:!1},{title:"Ratings",dataIndex:"ratings",search:!1,render:function(o,n){return(0,e.jsx)(E.Z,{onClick:function(){p(!0),r(n)},children:"See Ratings"})}},{title:"Comments and Suggestions",dataIndex:"rateComment",search:!1},{title:"Reports",render:function(o,n){var x;return(0,e.jsx)("strong",{children:n==null||(x=n.reports)===null||x===void 0?void 0:x.join(". ")})},search:!1},{title:"Remarks",dataIndex:"remarks",render:function(o,n){return n!=null&&n.remarks?"Done":"Pending"},filters:!0,filterMultiple:!1,valueEnum:{1:{text:"Done"},0:{text:"Pending"}},search:!1},{title:"Date",dataIndex:"createdAt",valueType:"date",render:function(o,n){return"".concat(X()(n==null?void 0:n.createdAt).format("MMMM DD, YYYY"))}},{title:"Actions",search:!1,hideInTable:i,render:function(o,n){return(0,e.jsx)(E.Z,{icon:(0,e.jsx)(ke.Z,{}),type:"primary",onClick:function(){r({mode:"assigned-officer",data:n}),d(!0)},children:"Update"},"button")}}],rowKey:"key",pagination:{pageSize:5},search:{filterType:"light"},dateFormatter:"string",headerTitle:"Overall Rating/Reports/Comments and Suggestions"})},Ht=function(){var t=B().get("user"),l=(0,Z.useRef)(),u=(0,Z.useRef)(),d=(0,Z.useRef)(),r=(0,Z.useRef)(),R=L.m8.location,v=(0,Z.useState)({}),p=(0,k.Z)(v,2),i=p[0],g=p[1],o=(0,Z.useState)({}),n=(0,k.Z)(o,2),x=n[0],a=n[1],D=(0,Z.useState)({}),S=(0,k.Z)(D,2),O=S[0],h=S[1],y=(0,Z.useState)([]),q=(0,k.Z)(y,2),U=q[0],z=q[1],Kt=(0,Z.useState)(!1),He=(0,k.Z)(Kt,2),Ke=He[0],Ve=He[1],Vt=(0,Z.useState)(!1),Ge=(0,k.Z)(Vt,2),Le=Ge[0],ue=Ge[1],Gt=(0,Z.useState)(!1),Je=(0,k.Z)(Gt,2),Qe=Je[0],ve=Je[1],Lt=(0,Z.useState)("month"),Xe=(0,k.Z)(Lt,2),Fe=Xe[0],Jt=Xe[1],Qt=(0,Z.useState)(""),qe=(0,k.Z)(Qt,2),Xt=qe[0],qt=qe[1],_t=(0,Z.useState)(null),_e=(0,k.Z)(_t,2),le=_e[0],er=_e[1],tr=(0,Z.useState)(0),et=(0,k.Z)(tr,2),tt=et[0],rr=et[1],nr=(0,Z.useState)(!1),rt=(0,k.Z)(nr,2),nt=rt[0],De=rt[1],ar=(0,Z.useState)([]),at=(0,k.Z)(ar,2),st=at[0],sr=at[1],lr=(0,Z.useState)([]),lt=(0,k.Z)(lr,2),it=lt[0],ir=lt[1],or=(0,Z.useState)({pending:0,resolved:0}),ot=(0,k.Z)(or,2),re=ot[0],ur=ot[1],dr=(0,Z.useState)(!1),ut=(0,k.Z)(dr,2),cr=ut[0],dt=ut[1],pr=(0,Z.useState)(!1),ct=(0,k.Z)(pr,2),fr=ct[0],pt=ct[1],vr=(0,Z.useState)(!1),ft=(0,k.Z)(vr,2),me=ft[0],vt=ft[1],Me=function(){var M=(0,b.Z)(c().mark(function f(j){var C,F,T,I;return c().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return C=j.overallFilter,F=j.startDate,T=j.endDate,pt(!0),w.next=4,Ct({overallFilter:C?JSON.stringify(C):null,establishment:(t==null?void 0:t.mode)==="assigned-officer"?t==null?void 0:t.name:void 0,startDate:F,endDate:T});case 4:I=w.sent,I.success&&(g(I.rate),pt(!1));case 6:case"end":return w.stop()}},f)}));return function(j){return M.apply(this,arguments)}}(),mt=function(){var M=(0,b.Z)(c().mark(function f(j){var C,F,T,I,A;return c().wrap(function($){for(;;)switch($.prev=$.next){case 0:return C=j.overallFilter,dt(!0),$.next=4,bt({overallFilter:C?JSON.stringify(C):null,establishment:(t==null?void 0:t.mode)==="assigned-officer"?t==null?void 0:t.name:void 0});case 4:F=$.sent,F.success&&(I=0,A=F==null||(T=F.raterTypes)===null||T===void 0?void 0:T.map(function(ee){return I+=ee.total,{type:"".concat(ee.total," - ").concat(ee._id),value:ee.total}}),rr(I),z(A),dt(!1));case 6:case"end":return $.stop()}},f)}));return function(j){return M.apply(this,arguments)}}(),ht=function(){var M=(0,b.Z)(c().mark(function f(j){var C,F,T;return c().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return C=j.overallFilter,vt(!0),A.next=4,kt({overallFilter:C?JSON.stringify(C):null,establishment:(t==null?void 0:t.mode)==="assigned-officer"?t==null?void 0:t.name:void 0});case 4:F=A.sent,F.success&&(F==null||(T=F.categorizedRemarks)===null||T===void 0||T.forEach(function(w){sr(function($){return[].concat((0,fe.Z)($),[{type:"".concat(w._id," - ").concat(w.pending),value:w.pending}])}),ir(function($){return[].concat((0,fe.Z)($),[{type:"".concat(w._id," - ").concat(w.resolved),value:w.resolved}])}),re.pending+=w.pending,re.resolved+=w.resolved}),ur(re),vt(!1));case 6:case"end":return A.stop()}},f)}));return function(j){return M.apply(this,arguments)}}(),mr=function(){var M=(0,b.Z)(c().mark(function f(){var j,C;return c().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,zt.TB)();case 2:j=T.sent,j.success?(j==null||(C=j.offices)===null||C===void 0||C.forEach(function(I){O[I.name]={text:I.name}}),h(O)):message.error("Failed to fetch offices");case 4:case"end":return T.stop()}},f)}));return function(){return M.apply(this,arguments)}}();(0,Z.useState)(function(){Me({}),ht({})},[]),(0,Z.useState)(function(){mt({})},[]),(0,Z.useState)(function(){mr()},[]);var Oe={data:U,angleField:"value",colorField:"type",radius:.9,label:{type:"inner",offset:"-30%",content:function(f){var j=f.percent;return"".concat((j*100).toFixed(0),"%")},style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]},de={angleField:"value",colorField:"type",radius:.7,label:{type:"inner",offset:"-30%",content:function(f){var j=f.percent;return"".concat((j*100).toFixed(0),"%")},style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]},W=function(f,j){var C,F,T=0;return C=parseInt(j)*5,F=parseFloat(f/C).toFixed(2),T=(F*100).toFixed(0),T},hr=function(f,j){Me({startDate:f?X()(f[0]).format("YYYY-MM-DD"):X()().subtract(14,"days").format("YYYY-MM-DD"),endDate:f?X()(f[1]).format("YYYY-MM-DD"):X()(new Date,"DD MMMM, YYYY").format("YYYY-MM-DD")})},N={backgroundColor:"#F3A931",paddingLeft:10,paddingRight:10,alignItems:"center",paddingTop:10,paddingBottom:10},H={color:"white",fontSize:25,lineHeight:0},K={color:"white",fontSize:15},gt=function(){return(0,e.jsxs)(G.Z,{gutter:[10,10],children:[(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Courtesy"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateOne,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Accuracy"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateTwo,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Professionalism"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateThree,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Cleanliness"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateFour,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Protocol"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateFive,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Timeliness"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateSix,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Service Efficiency"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateSeven,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Fairness"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateEight,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Timeliness"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateSix,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Overall Services"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateNine,i.Cnt),"%"]})]})}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)("div",{style:N,children:[(0,e.jsx)("p",{style:K,children:"Responsiveness"}),(0,e.jsxs)("p",{style:H,children:[W(i.rateTen,i.Cnt),"%"]})]})})]})};function yt(){return(0,e.jsxs)(ie.Z,{children:[(0,e.jsx)(oe.ZP.Group,{options:[{label:"Month",value:"month"},{label:"Quarter",value:"quarter"},{label:"Year",value:"year"}],defaultValue:Fe,onChange:function(f){return Jt(f.target.value)},optionType:"button",buttonStyle:"solid"}),(0,e.jsx)(Ie.Z,{picker:Fe,defaultValue:Xt,onChange:function(f){qt(f),gr(f,Fe)}}),R.pathname.includes("/admin/print/dashboard")?(0,e.jsx)(E.Z,{type:"danger",icon:(0,e.jsx)($e.Z,{}),onClick:function(){return window.print()},children:"Print Now"}):(0,e.jsx)(Wt.rU,{to:"/admin/print/dashboard",target:"_blank",children:(0,e.jsx)(E.Z,{icon:(0,e.jsx)($e.Z,{}),type:"primary",children:"Preview Print"})})]})}var gr=function(f,j){var C,F,T,I,A,w,$,ee,ne={};j==="month"&&(ne={type:j,year:f.year(),month:f.format("MM")}),j==="quarter"&&(ne={type:j,year:f.year(),startMonth:f.format("MM"),endMonth:f.add(2,"M").format("MM")}),j==="year"&&(ne={type:j,year:f.year()}),mt({overallFilter:ne}),Me({overallFilter:ne}),ht({overallFilter:ne}),er(ne),l==null||(C=l.current)===null||C===void 0||(F=C.reload)===null||F===void 0||F.call(C),r==null||(T=r.current)===null||T===void 0||(I=T.reload)===null||I===void 0||I.call(T),u==null||(A=u.current)===null||A===void 0||(w=A.reload)===null||w===void 0||w.call(A),d==null||($=d.current)===null||$===void 0||(ee=$.reload)===null||ee===void 0||ee.call($)};return R.pathname.includes("/admin/print/dashboard")?(Oe.label={type:"outer",content:"{name} {percentage}"},de.label={type:"outer",content:"{name} {percentage}"},(0,e.jsxs)(Be.ZP,{title:t.mode==="admin"?"Dashboard":t.name,extra:(0,e.jsx)(yt,{}),children:[(0,e.jsx)(V.Z,{title:"".concat(tt," Respondents"),children:U.length>0?(0,e.jsx)(ae.Z,(0,P.Z)({},Oe)):(0,e.jsx)(_,{})}),(0,e.jsx)("div",{style:{height:20}}),(0,e.jsx)(V.Z,{title:"Performance",children:i!=null&&i.Cnt?(0,e.jsx)(gt,{}):(0,e.jsx)(_,{})}),(0,e.jsx)("div",{style:{height:10}}),t.mode==="admin"&&(0,e.jsx)(V.Z,{loading:me,title:"Resolved Issues (".concat(re.resolved,")"),children:(0,e.jsx)(m.Z,{children:U.length>0?(0,e.jsx)(ae.Z,(0,P.Z)({data:it},de)):(0,e.jsx)(_,{})})}),t.mode==="admin"&&(0,e.jsx)(V.Z,{loading:me,title:"Pending Issues (".concat(re.pending,")"),children:(0,e.jsx)(m.Z,{children:U.length>0?(0,e.jsx)(ae.Z,(0,P.Z)({data:st},de)):(0,e.jsx)(_,{})})}),(0,e.jsx)(We,{overallFilter:le,reportsCountTableRef:r,forPrint:!0,establishment:t.name}),t.mode==="admin"&&(0,e.jsx)(Ue,{offices:O,overallFilter:le,commentsTableRef:u,reportsTableRef:l,setUpdateReport:ue,setSelectedReport:a,forPrint:!0}),t.mode==="assigned-officer"&&(0,e.jsx)(Ne,{assignedOfficerTableRef:d,setUpdateReport:ue,setSelectedReport:a,overallFilter:le,user:t,setSeeRatings:ve,forPrint:!0})]})):(0,e.jsxs)(Be.ZP,{title:t.mode==="admin"?"Dashboard":t.name,extra:(0,e.jsx)(yt,{}),children:[Ke&&(0,e.jsx)(Ot,{state:Ke,setState:Ve,onSeeRatings:function(f){ve(!0),a(f)},user:t}),nt&&(0,e.jsx)($t,{state:nt,setState:De,offices:O}),Le&&(0,e.jsx)(Yt,{state:Le,setState:ue,selectedReport:x,actionRef:l,commentsTableRef:u,assignedOfficerTableRef:d}),Qe&&(0,e.jsx)(At,{state:Qe,setState:ve,comment:x}),(0,e.jsxs)(G.Z,{gutter:10,children:[(0,e.jsx)(m.Z,{xs:24,sm:24,md:24,lg:12,xl:12,children:(0,e.jsx)(V.Z,{loading:cr,title:"Respondents (Total ".concat(tt,")"),extra:(0,e.jsx)(E.Z,{type:"primary",onClick:function(){return Ve(!0)},children:"See respondents"}),children:U.length>0?(0,e.jsx)(ae.Z,(0,P.Z)({},Oe)):(0,e.jsx)(_,{})})}),(0,e.jsx)(m.Z,{xs:24,sm:24,md:24,lg:12,xl:12,children:(0,e.jsx)(V.Z,{loading:fr,style:{height:"100%"},title:"Performance",extra:(0,e.jsx)(Nt,{onChange:hr}),children:i!=null&&i.Cnt?(0,e.jsx)(gt,{}):(0,e.jsx)(_,{})})})]}),(0,e.jsx)("div",{style:{height:10}}),t.mode==="admin"&&(0,e.jsxs)(G.Z,{gutter:10,children:[(0,e.jsx)(m.Z,{xs:24,sm:24,md:24,lg:12,xl:12,children:(0,e.jsx)(V.Z,{loading:me,title:"Resolved Issues (".concat(re.resolved,")"),extra:(0,e.jsx)(E.Z,{type:"primary",onClick:function(){return De("resolved")},children:"See Resolved Issues"}),children:(0,e.jsx)(m.Z,{children:U.length>0?(0,e.jsx)(ae.Z,(0,P.Z)({data:it},de)):(0,e.jsx)(_,{})})})}),(0,e.jsx)(m.Z,{xs:24,sm:24,md:24,lg:12,xl:12,children:(0,e.jsx)(V.Z,{loading:me,title:"Pending Issues (".concat(re.pending,")"),extra:(0,e.jsx)(E.Z,{type:"primary",onClick:function(){return De("pending")},children:"See Pending Issues"}),children:(0,e.jsx)(m.Z,{children:U.length>0?(0,e.jsx)(ae.Z,(0,P.Z)({data:st},de)):(0,e.jsx)(_,{})})})})]}),(0,e.jsx)("div",{style:{height:10}}),(0,e.jsx)(We,{overallFilter:le,reportsCountTableRef:r,forPrint:!0,establishment:t.name}),(0,e.jsx)("div",{style:{height:10}}),t.mode==="admin"&&(0,e.jsx)(Ue,{offices:O,overallFilter:le,commentsTableRef:u,reportsTableRef:l,setUpdateReport:ue,setSelectedReport:a}),t.mode==="assigned-officer"&&(0,e.jsx)(Ne,{assignedOfficerTableRef:d,setUpdateReport:ue,setSelectedReport:a,overallFilter:le,user:t,setSeeRatings:ve})]})}},30020:function(jt,ce,s){"use strict";s.d(ce,{TB:function(){return fe},KW:function(){return Ee},si:function(){return Ye}});var pe=s(3182),V=s(94043),te=s.n(V),ie=s(21010),we=s(58971),oe=s.n(we);function fe(Q){return k.apply(this,arguments)}function k(){return k=(0,pe.Z)(te().mark(function Q(E){var P;return te().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return P=oe().get("token"),Y.abrupt("return",(0,ie.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/get-offices"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(P)},query:E,skipErrorHandler:!0}));case 2:case"end":return Y.stop()}},Q)})),k.apply(this,arguments)}function Ee(Q){return G.apply(this,arguments)}function G(){return G=(0,pe.Z)(te().mark(function Q(E){var P;return te().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return P=oe().get("token"),Y.abrupt("return",(0,ie.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/create-office"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(P)},data:E,skipErrorHandler:!0}));case 2:case"end":return Y.stop()}},Q)})),G.apply(this,arguments)}function Ye(Q){return m.apply(this,arguments)}function m(){return m=(0,pe.Z)(te().mark(function Q(E){var P;return te().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return P=oe().get("token"),Y.abrupt("return",(0,ie.WY)("".concat("https://capstone-feedback-api.herokuapp.com","/edit-office"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(P)},data:E,skipErrorHandler:!0}));case 2:case"end":return Y.stop()}},Q)})),m.apply(this,arguments)}}}]);
